
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Men칰 Familiar</title>
    <link rel="manifest" href="manifest.json">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .hidden { display: none; }
        body { background-color: #f1f5f9; }
    </style>
</head>
<body class="bg-slate-50 min-h-screen">

    <div id="auth-screen" class="fixed inset-0 bg-indigo-900 z-[200] flex flex-col items-center justify-center p-6 text-white">
        <div class="w-full max-w-sm bg-white text-slate-800 p-8 rounded-3xl shadow-2xl">
            <h1 class="text-2xl font-bold mb-6 text-center text-indigo-700">Bienvenido a Men칰 Familiar</h1>
            
            <div class="space-y-4">
                <input type="email" id="email" placeholder="Correo electr칩nico" class="w-full p-3 border rounded-xl outline-none focus:ring-2 focus:ring-indigo-500">
                <input type="password" id="password" placeholder="Contrase침a" class="w-full p-3 border rounded-xl outline-none focus:ring-2 focus:ring-indigo-500">
                
                <button onclick="handleAuth('login')" class="w-full bg-indigo-600 text-white p-3 rounded-xl font-bold hover:bg-indigo-700 transition">Entrar</button>
                <button onclick="handleAuth('signup')" class="w-full border-2 border-indigo-600 text-indigo-600 p-3 rounded-xl font-bold hover:bg-indigo-50 transition">Crear Cuenta Familiar</button>
            </div>
            <p id="auth-error" class="text-red-500 text-xs mt-4 text-center"></p>
        </div>
    </div>

    <div id="app-content" class="hidden">
        <nav class="bg-indigo-700 text-white p-4 sticky top-0 shadow-lg flex justify-between items-center z-40">
            <div>
                <span id="user-email" class="text-[10px] block opacity-70"></span>
                <h1 class="font-bold">游 Men칰 Familiar</h1>
            </div>
            <button onclick="logout()" class="text-xs bg-red-500/20 px-2 py-1 rounded">Salir</button>
        </nav>
        
        <div class="p-4 max-w-md mx-auto space-y-6">
            <div id="menu-semanal" class="bg-white p-4 rounded-2xl shadow-sm">
                <p class="text-center text-slate-400">Cargando men칰...</p>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } 
        from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        
  const firebaseConfig = {
    apiKey: "AIzaSyB7tIGdnmhAGrADjBAROsmgMjTobCvTCKM",
    authDomain: "menufamiliar-b2be3.firebaseapp.com",
    projectId: "menufamiliar-b2be3",
    storageBucket: "menufamiliar-b2be3.firebasestorage.app",
    messagingSenderId: "1026330443761",
    appId: "1:1026330443761:web:b94dd3344bada3721ece50"
  };


        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // L칩gica de Autenticaci칩n
        window.handleAuth = async (type) => {
            const email = document.getElementById('email').value;
            const pass = document.getElementById('password').value;
            const errorDiv = document.getElementById('auth-error');
            
            try {
                if (type === 'signup') await createUserWithEmailAndPassword(auth, email, pass);
                else await signInWithEmailAndPassword(auth, email, pass);
            } catch (error) {
                errorDiv.innerText = "Error: " + error.message;
            }
        };

        window.logout = () => signOut(auth);

        // Observar estado del usuario
        onAuthStateChanged(auth, (user) => {
            if (user) {
                document.getElementById('auth-screen').classList.add('hidden');
                document.getElementById('app-content').classList.remove('hidden');
                document.getElementById('user-email').innerText = user.email;
                // Aqu칤 llamar칤as a tu funci칩n render() de la app
            } else {
                document.getElementById('auth-screen').classList.remove('hidden');
                document.getElementById('app-content').classList.add('hidden');
            }
        });
    </script>
</body>
</html>
