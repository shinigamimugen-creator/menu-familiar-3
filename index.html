
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MenÃº Familiar - Mexicali</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .admin-only { display: none; }
        body { background-color: #f1f5f9; font-family: sans-serif; }
    </style>
</head>
<body class="pb-20">
    <nav class="bg-indigo-700 text-white p-4 sticky top-0 shadow-md flex justify-between items-center">
        <h1 class="font-bold">ğŸ  MenÃº Familiar - Mexicali</h1>
        <button onclick="toggleAdmin()" class="text-xs opacity-50">Admin</button>
    </nav>

    <div class="p-4 max-w-md mx-auto space-y-6">
        <section class="bg-white p-4 rounded-2xl shadow-sm">
            <h2 class="text-lg font-bold text-slate-800 mb-3">ğŸ“… MenÃº Semanal</h2>
            <div id="menu-semanal" class="grid grid-cols-1 gap-2"></div>
            <button onclick="generarNuevoMenu()" class="admin-only mt-4 w-full bg-indigo-600 text-white py-2 rounded-xl">ğŸ”„ Generar Nuevo MenÃº</button>
        </section>

        <section class="bg-white p-4 rounded-2xl shadow-sm">
            <h2 class="text-lg font-bold text-slate-800 mb-3">â­ Vota tu favorito</h2>
            <div id="lista-votos" class="space-y-2"></div>
        </section>
    </div>

    <div id="toast" class="fixed bottom-24 left-1/2 -translate-x-1/2 bg-slate-800 text-white px-4 py-2 rounded-full text-sm hidden"></div>

    <script>
        const claveAdmin = "1234";
        const platos = [
            "Salmon a la plancha", "Bulgogi", "Tacos de asada", "Fajitas de pollo", 
            "Machaca", "Tacos dorados", "Enchiladas rojas", "Choripan", 
            "Sandwich de atun", "Tacos de camaron", "Ensalada de pollo", 
            "Espagueti chipotle", "Carne en su jugo", "Caldo de res", "Caldo de pollo"
        ];

        let database = JSON.parse(localStorage.getItem('menuData')) || {
            votos: platos.reduce((a, b) => ({...a, [b]: 0}), {}),
            menuActual: platos.slice(0, 7)
        };

        function save() { localStorage.setItem('menuData', JSON.stringify(database)); }

        function render() {
            const dias = ['Lun','Mar','Mie','Jue','Vie','Sab','Dom'];
            document.getElementById('menu-semanal').innerHTML = database.menuActual.map((p, i) => `
                <div class="flex justify-between p-2 border-b border-slate-50 last:border-0">
                    <span class="text-slate-500 text-sm font-bold w-12">${dias[i]}</span>
                    <span class="text-slate-700 flex-1">${p}</span>
                </div>
            `).join('');

            document.getElementById('lista-votos').innerHTML = platos.map(p => `
                <div class="flex justify-between items-center bg-slate-50 p-3 rounded-xl">
                    <span class="text-sm font-medium">${p}</span>
                    <div class="flex items-center gap-3">
                        <span class="text-indigo-600 font-bold">${database.votos[p]}</span>
                        <button onclick="votar('${p}')" class="bg-white border shadow-sm px-3 py-1 rounded-lg active:bg-indigo-50">ğŸ‘</button>
                    </div>
                </div>
            `).join('');
        }

        function votar(p) {
            database.votos[p]++;
            save(); render();
            showToast("Â¡Voto registrado!");
        }

        function generarNuevoMenu() {
            database.menuActual = [...platos].sort(() => Math.random() - 0.5).slice(0, 7);
            save(); render();
            showToast("MenÃº actualizado");
        }

        function toggleAdmin() {
            const pass = prompt("Introduce la clave de administrador:");
            if(pass === claveAdmin) {
                document.querySelectorAll('.admin-only').forEach(el => el.style.display = 'block');
                showToast("Modo Admin Activo");
            } else {
                alert("Clave incorrecta");
            }
        }

        function showToast(msg) {
            const t = document.getElementById('toast');
            t.innerText = msg; t.classList.remove('hidden');
            setTimeout(() => t.classList.add('hidden'), 2000);
        }

        render();
    </script>
</body>
</html>
